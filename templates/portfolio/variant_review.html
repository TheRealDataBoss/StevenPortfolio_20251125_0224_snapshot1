<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Variant Review Mode</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f1f5f9; }
    .variant-card { transition: box-shadow 0.15s; }
    .variant-card:hover { box-shadow: 0 4px 16px rgba(0,0,0,.12); }
    .page-links a { margin: 0 0.15rem; }
  </style>
</head>
<body>
  <div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h1 class="h3 mb-1">Variant Review Mode</h1>
        <p class="text-muted mb-0">Preview every template variant across core pages.</p>
      </div>
      <a href="/" class="btn btn-outline-secondary btn-sm">Back to site</a>
    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle bg-white rounded shadow-sm">
        <thead class="table-light">
          <tr>
            <th style="width:200px">Variant</th>
            <th>Preview links</th>
          </tr>
        </thead>
        <tbody>
          {% for v in variants %}
          <tr class="variant-card" data-variant-slug="{{ v.slug }}">
            <td>
              <strong>{{ v.label }}</strong>
              <br><code class="small text-muted">{{ v.slug }}</code>
            </td>
            <td class="page-links">
              {% if v.profile_slug %}
                {% for page_name, page_url in core_pages %}
                  <a href="{{ page_url }}?profile={{ v.profile_slug }}"
                     class="btn btn-sm btn-outline-primary mb-1"
                     target="_blank">{{ page_name }}</a>
                {% endfor %}
              {% else %}
                <span class="text-warning small">No LayoutProfile found for this variant. Run the seed script.</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="mt-3 text-muted small">
      Links open with <code>?profile=&lt;slug&gt;</code> which activates variant preview in DEBUG mode.
    </div>
  </div>
</body>
</html>
